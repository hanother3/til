【マップの扱い 2】マップの書き換え・縦横

```ruby
h, w = gets.chomp.split.map(&:to_i)
move = [-1, 1]
s = []

h.times do
  s << gets.chomp
end

y, x = gets.chomp.split.map(&:to_i)

if s[y][x] == "."
  s[y][x] = "#"
else
  s[y][x] = "."
end

move.each do |i|
  if 0 <= y + i && y + i < h
    if s[y + i][x] == "."
      s[y + i][x] = "#"
    else
      s[y + i][x] = "."
    end
  end

  if 0 <= x + i && x + i < w
    if s[y][x + i] == "."
      s[y][x + i] = "#"
    else
      s[y][x + i] = "."
    end
  end
end

s.each do |val|
  puts val
end
```

このコードは、与えられた盤面に対して、指定された座標とその周囲のマスを反転させる処理を行い、変更後の盤面を出力するプログラムです。

最初の行では、盤面の高さを表す整数hと、盤面の幅を表す整数wを入力しています。

getsメソッドで標準入力から取得した文字列を、splitメソッドで空白で区切って配列に分割し、mapメソッドで各要素を整数に変換して、それぞれhとwに代入しています。

次に、移動する量を表す配列moveを定義し、空の配列sを初期化しています。

その後、h回ループを回しながら、getsメソッドで標準入力から取得した文字列を配列sに格納しています。

次に、指定された座標を表す変数yとxを、getsメソッドで標準入力から取得しています。

その後、座標(y, x)のマスの状態によって、マスを反転させています。座標(y, x)のマスの状態が"."であれば、"#"に変更し、"#"であれば"."に変更します。

最後に、移動量を表す配列moveの要素を順番に取り出しながら、指定された座標から上下左右のマスを順番に反転させています。

まず、座標(y + move[i], x)が盤面内に存在するかどうかをチェックし、存在する場合はそのマスの状態を反転させます。

次に、座標(y, x + move[i])が盤面内に存在するかどうかをチェックし、存在する場合はそのマスの状態を反転させます。

最後に、配列sの要素を順番に取り出しながら、各行を改行付きで出力しています。
